<!DOCTYPE html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  </head>
<h1>Make this page pretty with bootstrap or pure.css</h1>

  <body>
    <a href="https://guestbookexcercise.herokuapp.com/">homepage</a>
    <a href="https://guestbookexcercise.herokuapp.com/guestbook">Guestbook</a>
    <a href="https://guestbookexcercise.herokuapp.com/newmessage">message</a>
    <a href="https://guestbookexcercise.herokuapp.com/ajax">Ajax</a>
      <h1>Messages!</h1>
      <button type="button" id="button1" class="btn btn-primary">
        load json
      </button>
      <table class="table table-striped"id="myTable">
        <tr>
            <th>Username</th>
            <th>Country</th>
            <th>Message</th>
        </tr>
      </table>
        <script>

        var nappi = document.getElementById("button1");

            // Lisätään nappiin kuuntelija, joka hakee kenttien tiedot klikattaessa
            nappi.addEventListener("click", () => {
                var Username = document.getElementById("Username").value;
                var Country = document.getElementById("Country").value;

                // Luodaan AJAX olio joka palauttaa vastauksensa status-kenttään     
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) {
                        document.getElementById("status").innerHTML = this.responseText;
                        console.log(this.responseText);
                    }
                };

                // Lähetetään AJAX pyyntö, tyyppiä POST osoitteeseen /kirjaudu
                xmlhttp.open("POST", "/newmessage", true);
                // Liitetään AJAX pyyntöön lomakkeen kenttien datat
                xmlhttp.setRequestHeader(
                    "Content-type",
                    "application/x-www-form-urlencoded"
                );
                xmlhttp.send( Username + " " + Country);
                document.getElementById("status").innerHTML =  Username + " " + Country
            });
      </script>
  </body>
</html> 
