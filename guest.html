<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  </head>
<h1>Make this page pretty with bootstrap or pure.css</h1>
    <a href="https://guestbookexcercise.herokuapp.com/">homepage</a>
    <a href="https://guestbookexcercise.herokuapp.com/guestbook">Guestbook</a>
    <a href="https://guestbookexcercise.herokuapp.com/newmessage">message</a>
    <a href="https://guestbookexcercise.herokuapp.com/ajax">Ajax</a>

  <body onload= LoadList()>

      <h1>Messages!</h1>
      <table class="table table-striped" id= "userdata">
            <thead>
              <th>Username</th>
              <th>Country</th>
              <th>Message</th>
          </thead>
          <tbody>

          </tbody>
    </table>

  </body>
  <script>
    function LoadList() {
    // määritellään kutsu
    var xhttp = new XMLHttpRequest();
    // avataan tiedosto
    xhttp.open("GET", './dataset.json', true);
    //lähetään kutsu..
    xhttp.send();
    // jos kutsu tulee takaisin. voidaan aloittaa function käyttö.
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        myFunction(this);
      }
    };
    }
    function myFunction(json) {
        //saatu xml tiedoston kutsu
        var xmlDoc = json.responseJson;
        // määrittelee talukon etukäteen.
        var table="<tr><th>Username</th><th>Country</th><th>Message</th></tr>";
        //heataan kaikki tiedot Show nimestä tagistä sisältö.
        var x = xmlDoc.getElementsByTagName("");


        for (var i = 0; i < x.length; i++) { 
            // tekee taulukon
            table += "<tr><td>" +
            //hakee talukolle jokaisen esityksen riville
            x[i].getElementsByTagName("Username")[0].childNodes[0].nodeValue +
            "</td><td>" +
            //hakee talukolle jokaisen esityksen pituunden riville
            x[i].getElementsByTagName("Country")[0].childNodes[0].nodeValue +
            "</td><td>" + 
            //hakee talukolle jokaisen esityksen luokitksen riville  
            x[i].getElementsByTagName("Message")[0].childNodes[0].nodeValue +
            "></td></tr>";
        }
        //tulostaa lopuksi demo taulukolle kaikki tiedot.
        document.getElementById("userdata").innerHTML = table;
      }

  </script>
</html> 
